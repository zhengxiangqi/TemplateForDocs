# 前端开发方案
随着前端技术的发展，前端渐渐的独立了出来，形成了一整套的流程及技术栈，不再像以往只是做做布局和交互，而是作为独立的应用来开发，拥有完善的业务逻辑。如何让这一流程更加规范化、自动化并且具有较好的可维护性，就成了前端需要思考的问题了。

* **前言**
    * 核心思想
    * 执行方案
* **基础**
    * 自动构建
    * 统一脚手架
    * Eslint & Prettier
    * Mock
* **应用**
    * 以应用为单位划分前端项目
    * 统一技术栈
    * 浏览器兼容
    * 常见问题
* **已有项目（不同技术栈）**
    * 持续维护，渐进优化
    * 编写README介绍项目技术栈及启动与部署方式
    * 对项目进行灰度代码校验及格式化
    * 在脚手架中加入全局代码校验及格式化工具
    * 统一化自动化部署方式
    * 后期再考虑是否有必要进行重构，模块化重构


### 前言

**核心思想**

选取一套合适的前端方案，有效减少项目前期启动成本及后期维护成本，提升开发效率，简化构建及部署流程，让开发者更多的关注于业务逻辑的开发。该技术方案需具备如下特点：上手门槛低、有规范的项目结构及编码方式、代码风格尽可能统一、易于扩展、便于维护、同时支持TypeScript和JavaScript、同时支持React与Vue、可自动构建。


**执行方案**

分为基础层和应用层，基础层偏基础设施建设，与业务相关性较低，应用层更贴近用户，用于解决某一个问题，部分两个都沾边的，根据经验划分到其中一个。


### 基础

**自动构建**

用于在代码发布后，执行一系列流程，例如自动编译打包合并，然后整合到后端工程静态资源目录中。将流程自动化，让研发人员专心于研发，和环境、运维等事情脱钩。例如Gitlab可以通过GitlabRunner来实现，为仓库注册runner，在提交时自动触发并调用runner服务器进行构建，实现流程自动化。


**统一脚手架**

统一脚手架可以减少开发人员配置脚手架带来的时间损耗，提高开发人员在多个项目之间的快速切换能力，特殊功能可以fork脚手架后再自行定制，例如Umi脚手架。


**Eslint & Prettier**

团队关于代码风格必须遵循两个基本原则：少数服从多数，用工具统一风格。可以使用ESLint对代码进行校验，使用Prettier将代码格式化成统一的风格，配置统一的校验及格式化方式，以提升项目风格一致性。


**Mock**

Mock是常见前端系统之一，用于解决在后端接口未好时，生成返回的数据，Mock可直接嵌入到脚手架之中。在开发前提前定好接口规范及数据结构，这样在前后端并行开发时，可显著降低沟通交流成本，方便开发完毕后直接对接。


### 应用

**以应用为单位划分前端项目**

以应用为单位划分前端项目，并且将前端项目从后端项目中分离出来，进行独立开发与追踪，可有效隔离代码及日志，也便于代码权限管理，让开发者专注于自己的开发内容。


**统一技术栈**

前端有三大主流框架：Vue、React、AngularJS，还有兼容性最强jQuery，以及各种第三方库，UI框架。如果项目需求复杂些，很容易形成大杂烩，因此前端的技术栈必须统一，好处有很多，可以有效提高开发效率，降低重复造轮子产生的成本，同时也方便招人，简化团队成员培养成本，以及提高项目的可持续性。


**浏览器兼容**

自行开发基础UI组件库时，需要面对繁杂的浏览器兼容性，虽然可以使用一些工具例如postcss来提升效率，但总体来说还是存在不少重复工作，往往还需要在优雅降级及渐进式开发中选取一种方式进行项目开发，选取第三方组件库可显著解决这个问题，基础组件兼容问题由第三方进行维护，避免重复造轮子。


**常见问题**

描述一些常见问题、疑难问题以及对应的解决方案。


### 已有项目

主要针对不同技术栈下的已有项目，相同技术栈下的项目定期更新基础架构即可。
1. 持续维护，渐进优化
2. 编写README介绍项目技术栈及启动与部署方式
3. 对项目进行灰度代码校验及格式化
4. 在脚手架中加入全局代码校验及格式化工具
5. 统一化自动化部署方式
6. 后期再考虑是否有必要进行重构，模块化重构
